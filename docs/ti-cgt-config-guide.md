# TI CGT C6000 工具链配置指南

## 概述

ZSide4CD 提供了友好的图形化界面来配置 TI CGT C6000 工具链，支持自动检测和手动配置两种方式。

## 打开配置界面

### 方法一：通过菜单
1. 点击菜单 **工具** → **工具链管理**
2. 在弹出的提示中选择选项 `2`（配置 TI CGT C6000 工具链）

### 方法二：首次使用
1. 首次启动 ZSide4CD 时，如果未检测到工具链
2. 系统会提示配置工具链
3. 选择配置 TI CGT

## 自动检测工具链

### 步骤

1. **点击"开始检测"按钮**
   - 系统会自动搜索常见的 TI CGT 安装位置
   - 包括：
     - `C:\ti\ccs\tools\compiler\`
     - `C:\TI\ccs\tools\compiler\`
     - `C:\Program Files\Texas Instruments\`
     - `C:\Program Files (x86)\Texas Instruments\`

2. **等待检测完成**
   - 显示加载动画
   - 通常需要 2-5 秒

3. **查看检测结果**
   - 成功：显示检测到的工具链列表
   - 失败：显示警告消息，提示手动配置

4. **选择工具链**
   - 在检测结果列表中点击要使用的工具链
   - 选中的项会高亮显示
   - 工具链信息会自动填充到手动配置表单

### 检测结果示例

```
检测到 2 个工具链

[✓] TI CGT C6000 8.3.0
    路径: C:\ti\ccs\tools\compiler\ti-cgt-c6000_8.3.0\bin

[✓] TI CGT C6000 9.1.0
    路径: C:\ti\ccs\tools\compiler\ti-cgt-c6000_9.1.0\bin
```

## 手动配置工具链

如果自动检测失败，或者工具链安装在非标准位置，可以手动配置。

### 配置步骤

1. **填写工具链名称**
   - 输入一个易于识别的名称
   - 例如：`TI CGT C6000 8.3.0`

2. **填写版本号**
   - 输入工具链的版本号
   - 例如：`8.3.0`
   - 提示：版本号通常在目录名中可以找到

3. **选择工具链路径**
   - 方式一：直接输入完整路径
   - 方式二：点击"浏览..."按钮选择目录
   - **重要**：选择包含 `cl6x.exe` 的 `bin` 目录
   - 例如：`C:\ti\ccs\tools\compiler\ti-cgt-c6000_8.3.0\bin`

4. **配置编译器和链接器（可选）**
   - 编译器默认为：`cl6x.exe`
   - 链接器默认为：`lnk6x.exe`
   - 通常不需要修改

### 验证工具链

在保存之前，强烈建议验证工具链：

1. **点击"验证工具链"按钮**
2. **查看验证结果**
   - ✓ 验证通过：工具链配置正确
   - ✗ 验证失败：检查路径是否正确

### 验证失败的常见原因

1. **路径错误**
   - 确保路径指向 `bin` 目录
   - 不是指向 `ti-cgt-c6000_x.x.x` 目录

2. **编译器文件不存在**
   - 检查 `cl6x.exe` 是否存在
   - 确认工具链安装完整

3. **权限问题**
   - 确保有权限访问该目录

## 保存配置

### 步骤

1. **确保所有必填字段已填写**
   - 工具链名称 *
   - 版本号 *
   - 工具链路径 *

2. **验证工具链（推荐）**
   - 点击"验证工具链"确保配置正确

3. **点击"保存配置"按钮**

4. **确认保存成功**
   - 显示"工具链配置已保存！"消息
   - 窗口会在 1.5 秒后自动关闭

## 配置文件位置

工具链配置保存在：

```
Windows: %APPDATA%\ZSide4CD\toolchains.json
```

配置文件格式示例：

```json
{
  "toolchains": [
    {
      "id": "ti-cgt-8-3-0",
      "name": "TI CGT C6000 8.3.0",
      "type": "ti-cgt",
      "path": "C:\\ti\\ccs\\tools\\compiler\\ti-cgt-c6000_8.3.0\\bin",
      "version": "8.3.0",
      "compiler": "cl6x.exe",
      "linker": "lnk6x.exe",
      "debugger": "cg_xml.exe",
      "manual": true
    }
  ]
}
```

## 使用配置的工具链

### 在项目中使用

1. **打开或创建 TI C67XX 项目**
2. **工具链会自动选择**
   - 系统会根据处理器类型自动匹配工具链
   - 状态栏会显示当前使用的工具链

3. **手动切换工具链**
   - 打开项目设置
   - 选择不同的工具链
   - 保存设置

### 验证工具链是否正常工作

1. **创建或打开一个测试项目**
2. **尝试构建项目**（F7）
3. **查看输出面板**
   - 成功：显示编译输出
   - 失败：检查工具链配置

## 常见问题

### Q1: 自动检测没有找到工具链？

**A**: 可能原因：
- TI CCS 未安装
- 安装路径不是标准路径
- 只安装了部分组件

**解决方案**：
- 使用手动配置
- 确保 Code Composer Studio 完整安装
- 检查是否安装了 C6000 编译器工具

### Q2: 验证失败，提示找不到编译器？

**A**: 检查：
- 路径是否指向 `bin` 目录
- `cl6x.exe` 文件是否存在
- 路径中是否有中文或特殊字符

### Q3: 保存后工具链列表中看不到？

**A**: 尝试：
- 重启 ZSide4CD
- 检查配置文件是否正确保存
- 查看 `%APPDATA%\ZSide4CD\toolchains.json`

### Q4: 可以配置多个版本的 TI CGT 吗？

**A**: 可以！
- 多次使用配置界面添加不同版本
- 每个版本使用不同的名称和路径
- 在项目中可以选择使用哪个版本

### Q5: 如何删除已配置的工具链？

**A**: 当前版本：
- 手动编辑配置文件 `toolchains.json`
- 删除对应的工具链条目
- 重启 IDE

未来版本将提供图形化删除功能。

## 最佳实践

### 1. 使用标准安装路径
推荐将 TI CCS 安装到默认路径：
```
C:\ti\ccs
```

### 2. 安装完整的 CCS
确保安装时选择了 C6000 工具链组件。

### 3. 定期更新工具链
- 访问 TI 官网获取最新版本
- 配置新版本，保留旧版本作为备份

### 4. 为工具链命名添加版本号
便于区分不同版本，例如：
- `TI CGT C6000 8.3.0`
- `TI CGT C6000 9.1.0`

### 5. 配置后立即验证
确保工具链可以正常使用。

## 技术支持

如果遇到配置问题：

1. **查看日志**
   - 输出面板会显示详细的错误信息

2. **参考文档**
   - 用户手册：`docs/user-guide.md`
   - 设计文档：`docs/design.md`

3. **提交问题**
   - GitHub Issues
   - 提供错误截图和配置信息

## 相关文档

- [用户手册](user-guide.md)
- [工具链集成方案](toolchain-integration.md)
- [设计文档](design.md)

---

**提示**: 首次配置时，建议先尝试自动检测。如果检测成功，配置会非常简单快速！
