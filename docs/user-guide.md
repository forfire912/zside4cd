# ZSide4CD 用户手册

## 目录

1. [简介](#简介)
2. [安装和配置](#安装和配置)
3. [快速开始](#快速开始)
4. [项目管理](#项目管理)
5. [代码编辑](#代码编辑)
6. [构建项目](#构建项目)
7. [程序调试](#程序调试)
8. [程序烧录](#程序烧录)
9. [工具链管理](#工具链管理)
10. [设置和定制](#设置和定制)
11. [常见问题](#常见问题)

---

## 简介

### 关于 ZSide4CD

ZSide4CD 是一个专为嵌入式系统开发设计的集成开发环境（IDE），基于开源项目 VSCodium 构建。它提供了完整的中文化界面，并针对 STM32F429 和 TI C67XX 系列处理器进行了优化。

### 主要特性

- **完整中文化界面** - 所有菜单和对话框均为中文
- **智能工具链管理** - 自动检测和配置工具链
- **多处理器支持** - STM32F429 和 TI C67XX
- **完整开发流程** - 编辑、构建、调试、烧录一体化
- **符合开源协议** - 基于 VSCodium (MIT License)

### 系统要求

- **操作系统**: Windows 10/11 (64-bit)
- **CPU**: 双核 2.0GHz 或更高
- **内存**: 4GB RAM（推荐 8GB）
- **硬盘**: 2GB 可用空间
- **开发工具**: ARM GCC 或 TI CGT 工具链

---

## 安装和配置

### 安装 ZSide4CD

1. 下载 ZSide4CD 安装包（ZSide4CD-Setup-1.0.0.exe）
2. 双击运行安装程序
3. 选择安装路径（默认：C:\Program Files\ZSide4CD）
4. 按照安装向导完成安装
5. 安装完成后，可以从开始菜单或桌面快捷方式启动

### 安装工具链

#### 安装 ARM GCC（用于 STM32 开发）

1. 访问 ARM 官方网站下载 ARM GCC 工具链
2. 运行安装程序
3. 建议安装到默认路径：`C:\Program Files (x86)\GNU Arm Embedded Toolchain`
4. 安装完成后，ZSide4CD 会自动检测工具链

**推荐版本**: ARM GCC 10.3.1 或更高

#### 安装 TI CGT（用于 C67XX 开发）

1. 访问 TI 官方网站下载 Code Composer Studio (CCS)
2. 安装 CCS，它包含了 C6000 代码生成工具
3. 默认安装路径：`C:\ti\ccs\tools\compiler\ti-cgt-c6000_x.x.x`
4. ZSide4CD 会自动检测已安装的 TI CGT

**推荐版本**: TI CGT 8.3.0 或更高

### 首次启动

首次启动 ZSide4CD 时，系统会：

1. 自动检测已安装的工具链
2. 创建用户配置文件
3. 显示欢迎屏幕

如果没有检测到工具链，请参考"工具链管理"章节手动配置。

---

## 快速开始

### 创建第一个 STM32 项目

1. 点击菜单 **文件** → **新建项目**（或按 Ctrl+Shift+N）
2. 选择处理器类型：**STM32F429**
3. 选择项目模板：**STM32 基础项目**
4. 输入项目名称，例如 `MySTM32Project`
5. 选择项目保存位置
6. 点击 **创建** 按钮

项目创建后会自动打开，可以看到：
- 项目浏览器中显示项目结构
- 编辑器区域显示 main.c 文件
- 状态栏显示当前处理器和工具链

### 创建第一个 C67XX 项目

1. 点击菜单 **文件** → **新建项目**
2. 选择处理器类型：**TI C67XX**
3. 选择项目模板：**C67XX 基础项目**
4. 输入项目名称，例如 `MyDSPProject`
5. 选择项目保存位置
6. 点击 **创建** 按钮

### 打开现有项目

1. 点击菜单 **文件** → **打开项目**（或按 Ctrl+Shift+O）
2. 浏览并选择项目目录
3. 点击 **选择文件夹** 按钮

项目会自动加载，并根据项目配置选择合适的工具链。

---

## 项目管理

### 项目结构

ZSide4CD 项目包含以下目录结构：

```
MyProject/
├── .zside/
│   └── project.json          # 项目配置文件
├── Core/
│   ├── Inc/                  # 头文件
│   └── Src/                  # 源文件
├── Drivers/                  # 驱动程序
├── Build/                    # 构建输出
├── Makefile                  # 构建脚本
└── README.md                 # 项目说明
```

### 项目配置文件

项目配置保存在 `.zside/project.json` 文件中，包含：

```json
{
  "name": "MyProject",
  "version": "1.0.0",
  "processorType": "stm32f429",
  "projectType": "executable",
  "toolchain": {
    "type": "arm-gcc",
    "path": "C:\\Program Files\\ARM\\bin"
  },
  "build": {
    "target": "firmware.elf",
    "optimization": "O2"
  }
}
```

### 项目浏览器

项目浏览器位于左侧边栏，显示项目文件结构。

**操作**:
- 单击文件：在编辑器中打开
- 右键文件：显示上下文菜单
- 双击文件夹：展开/折叠

### 关闭项目

点击菜单 **文件** → **关闭项目**，当前项目会被关闭，回到欢迎屏幕。

---

## 代码编辑

### 编辑器功能

ZSide4CD 提供完整的代码编辑功能：

- **语法高亮** - 自动识别 C/C++ 语法
- **代码补全** - 智能提示函数和变量
- **代码折叠** - 折叠/展开代码块
- **查找替换** - Ctrl+F 查找，Ctrl+H 替换
- **多文件编辑** - 标签页管理多个文件

### 快捷键

| 功能 | 快捷键 |
|------|--------|
| 保存 | Ctrl+S |
| 保存全部 | Ctrl+K S |
| 撤销 | Ctrl+Z |
| 重做 | Ctrl+Y |
| 查找 | Ctrl+F |
| 替换 | Ctrl+H |
| 转到行 | Ctrl+G |
| 注释/取消注释 | Ctrl+/ |

### 代码片段

使用代码片段快速插入常用代码：

- 输入 `main` 然后按 Tab - 插入 main 函数模板
- 输入 `for` 然后按 Tab - 插入 for 循环
- 输入 `if` 然后按 Tab - 插入 if 语句

---

## 构建项目

### 构建当前项目

1. 点击工具栏 **构建** 按钮（或按 F7）
2. 或选择菜单 **构建** → **构建**

构建过程会在输出面板显示：
```
[12:34:56] === 开始构建 ===
[12:34:56] 正在编译 main.c...
[12:34:57] 正在链接...
[12:34:58] 构建成功
[12:34:58] === 构建完成 ===
```

### 重新构建

重新构建会先清理，然后构建：

1. 点击菜单 **构建** → **重新构建**（或按 Shift+F7）

### 清理项目

清理会删除所有构建生成的文件：

1. 点击菜单 **构建** → **清理**

### 构建配置

在项目配置中可以设置构建选项：

```json
{
  "build": {
    "target": "firmware.elf",
    "optimization": "O2",
    "defines": {
      "STM32F429xx": "",
      "USE_HAL_DRIVER": ""
    },
    "includePaths": [
      "Core/Inc",
      "Drivers/Inc"
    ]
  }
}
```

**优化级别**:
- `O0` - 无优化（用于调试）
- `O1` - 基本优化
- `O2` - 标准优化（推荐）
- `O3` - 激进优化
- `Os` - 优化代码大小

---

## 程序调试

### 准备调试

1. 确保项目已成功构建
2. 连接开发板到电脑（USB）
3. 确保调试器驱动已安装（ST-Link 或 J-Link）

### 启动调试

1. 点击工具栏 **调试** 按钮（或按 F5）
2. 或选择菜单 **调试** → **启动调试**

调试器会：
- 连接到目标设备
- 下载程序到 RAM/Flash
- 在 main 函数处停止

### 调试操作

| 操作 | 快捷键 | 说明 |
|------|--------|------|
| 继续 | F5 | 继续执行程序 |
| 单步跳过 | F10 | 执行当前行，不进入函数 |
| 单步进入 | F11 | 执行当前行，进入函数 |
| 单步跳出 | Shift+F11 | 执行到当前函数返回 |
| 停止调试 | Shift+F5 | 停止调试会话 |

### 断点

**设置断点**:
- 在代码行号左侧单击
- 红色圆点表示断点已设置

**移除断点**:
- 再次单击断点
- 或右键选择"删除断点"

**条件断点**:
- 右键断点，选择"编辑断点"
- 设置断点条件，例如 `i == 10`

### 查看变量

在调试模式下：
- 鼠标悬停在变量上查看值
- 在变量窗口查看所有变量
- 在监视窗口添加表达式

### 查看内存和寄存器

1. 选择菜单 **调试** → **内存查看器**
2. 输入内存地址查看内容
3. 选择菜单 **调试** → **寄存器**查看 CPU 寄存器

---

## 程序烧录

### 准备烧录

1. 确保项目已成功构建
2. 连接开发板到电脑
3. 确保烧录器驱动已安装

### 烧录程序

1. 点击工具栏 **烧录** 按钮（或按 Ctrl+Alt+F）
2. 或选择菜单 **工具** → **烧录程序**

烧录过程：
```
[12:45:00] === 开始烧录程序 ===
[12:45:01] 连接到设备...
[12:45:02] 擦除 Flash...
[12:45:05] 写入程序...
[12:45:10] 验证...
[12:45:11] 烧录成功
[12:45:11] === 烧录完成 ===
```

### 烧录配置

在项目配置中设置烧录选项：

```json
{
  "flash": {
    "programmer": "stlink",
    "interface": "swd",
    "device": "STM32F429ZI",
    "flashAddress": "0x08000000",
    "verifyAfterFlash": true
  }
}
```

### STM32 烧录

**支持的编程器**:
- ST-Link V2/V3
- J-Link
- OpenOCD

**接口类型**:
- SWD（推荐）
- JTAG

### C67XX 烧录

**支持的编程器**:
- TI XDS 系列
- TI CCS

**接口类型**:
- JTAG

---

## 工具链管理

### 查看已配置工具链

1. 选择菜单 **工具** → **工具链管理**
2. 输出面板会显示所有已配置的工具链

示例输出：
```
当前已配置 2 个工具链:
  1. ARM GCC 10.3.1 (arm-gcc) - C:\Program Files\ARM\bin
  2. TI CGT C6000 8.3.0 (ti-cgt) - C:\ti\ccs\tools\compiler\ti-cgt-c6000_8.3.0\bin
```

### 自动检测工具链

1. 选择菜单 **工具** → **工具链管理**
2. 点击"确定"开始自动检测
3. 系统会搜索以下位置：
   - 常见安装路径
   - 环境变量 PATH
   - 注册表（Windows）

检测完成后会显示结果：
```
正在检测工具链...
检测完成，发现 2 个工具链
  1. ARM GCC 10.3.1
     路径: C:\Program Files\ARM\bin
  2. TI CGT C6000 8.3.0
     路径: C:\ti\ccs\tools\compiler\ti-cgt-c6000_8.3.0\bin
工具链信息已保存
```

### 手动添加工具链

如果自动检测失败，可以手动添加：

1. 编辑工具链配置文件：
   - Windows: `%APPDATA%\ZSide4CD\toolchains.json`

2. 添加工具链信息：
```json
{
  "toolchains": [
    {
      "id": "arm-gcc-custom",
      "name": "ARM GCC Custom",
      "type": "arm-gcc",
      "path": "D:\\MyTools\\ARM\\bin",
      "version": "10.3.1",
      "compiler": "arm-none-eabi-gcc.exe",
      "linker": "arm-none-eabi-ld.exe",
      "debugger": "arm-none-eabi-gdb.exe"
    }
  ]
}
```

3. 重启 ZSide4CD

### 工具链验证

系统会自动验证工具链是否有效：
- 检查可执行文件是否存在
- 尝试运行编译器获取版本
- 验证工具链路径

无效的工具链会显示警告。

---

## 设置和定制

### 打开设置

选择菜单 **工具** → **设置**（或按 Ctrl+,）

### 常规设置

```json
{
  "language": "zh-CN",
  "theme": "dark",
  "autoDetectToolchains": true,
  "showWelcomePage": true
}
```

**语言**: 
- `zh-CN` - 简体中文（默认）
- `en-US` - English

**主题**:
- `dark` - 深色主题（默认）
- `light` - 浅色主题

### 品牌定制

在设置中可以定制 IDE 品牌信息：

```json
{
  "branding": {
    "productName": "ZSide4CD",
    "companyName": "Your Company",
    "copyright": "Copyright © 2025 Your Company",
    "basedOn": "Based on VSCodium (MIT License)",
    "logo": "assets/logo.png",
    "icon": "assets/icon.ico"
  }
}
```

**注意**: 根据 MIT 许可证要求，必须保留"基于 VSCodium"的声明。

### 编辑器设置

```json
{
  "editor": {
    "fontSize": 14,
    "tabSize": 2,
    "insertSpaces": true,
    "lineNumbers": "on",
    "minimap": true,
    "wordWrap": "off"
  }
}
```

---

## 常见问题

### Q: 启动时没有检测到工具链怎么办？

A: 请检查：
1. 是否已正确安装 ARM GCC 或 TI CGT
2. 尝试手动运行工具链检测（菜单 → 工具 → 工具链管理）
3. 如果仍然失败，参考"手动添加工具链"章节

### Q: 构建时提示"未找到编译器"？

A: 请确保：
1. 工具链已正确配置
2. 项目已选择正确的处理器类型
3. 工具链路径正确且编译器可执行

### Q: 调试器无法连接到设备？

A: 请检查：
1. 开发板是否正确连接
2. 调试器驱动是否已安装
3. 设备管理器中是否识别到调试器
4. 调试配置是否正确

### Q: 烧录失败怎么办？

A: 常见原因：
1. 设备未连接或连接不良
2. 烧录器驱动问题
3. Flash 已被保护
4. 程序大小超出 Flash 容量

### Q: 如何更新 ZSide4CD？

A: 
1. 下载最新安装包
2. 运行安装程序
3. 选择"升级"选项
4. 用户配置和项目会自动保留

### Q: 如何备份项目？

A: 
1. 直接复制整个项目文件夹
2. 或使用 Git 进行版本控制
3. 建议定期备份重要项目

### Q: 支持其他处理器吗？

A: 当前版本支持 STM32F429 和 TI C67XX。如需支持其他处理器，请：
1. 查阅扩展开发文档
2. 或联系技术支持

### Q: 如何报告问题或提出建议？

A: 
1. 访问项目 GitHub 页面
2. 在 Issues 中提交问题或建议
3. 或通过官方邮箱联系支持团队

---

## 附录

### A. 快捷键参考

| 功能 | 快捷键 |
|------|--------|
| 新建项目 | Ctrl+Shift+N |
| 打开项目 | Ctrl+Shift+O |
| 保存 | Ctrl+S |
| 保存全部 | Ctrl+K S |
| 查找 | Ctrl+F |
| 替换 | Ctrl+H |
| 构建 | F7 |
| 重新构建 | Shift+F7 |
| 启动调试 | F5 |
| 停止调试 | Shift+F5 |
| 单步跳过 | F10 |
| 单步进入 | F11 |
| 烧录 | Ctrl+Alt+F |
| 设置 | Ctrl+, |

### B. 文件类型关联

| 扩展名 | 文件类型 |
|--------|----------|
| .c | C 源文件 |
| .cpp | C++ 源文件 |
| .h | C/C++ 头文件 |
| .s | 汇编源文件 |
| .ld | 链接脚本 |
| .json | JSON 配置文件 |
| .md | Markdown 文档 |

### C. 支持的文件编码

- UTF-8（推荐）
- UTF-8 with BOM
- GBK
- GB2312
- ASCII

### D. 技术支持

- **GitHub**: https://github.com/forfire912/zside4cd
- **文档**: 查阅 docs 目录
- **问题反馈**: 通过 GitHub Issues

---

## 许可证

ZSide4CD 基于 VSCodium 开发，采用 MIT 许可证。

详细信息请参阅：
- [LICENSE](../LICENSE)
- [NOTICE](../NOTICE)

---

**ZSide4CD** - 让嵌入式开发更简单 🚀

版本: 1.0.0  
更新日期: 2025-01-01
